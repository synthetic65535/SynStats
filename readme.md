# SynStats

SynStats - это простой парсер [статистики Minecraft](http://minecraft.gamepedia.com/Statistics), которая хранится в виде JSON-файлов. 

### Как это работает?
При вызове PHP-скрипта парсер просматривает содержимое папки "stats", в которой хранятся [вот такие](http://pastebin.com/63wsb2pL) JSON-файлы. Из них он извлекает нужную информацию об игроках и сохраняет её в собственный кеш, тоже в виде JSON-файла. Затем парсер использует кешированную информацию для создания HTML-страниц, содержащих статистику игроков на сервере.

### Как его настроить?

Парсер состоит из двух частей: клиента (index.php) и сервера (server.php), которые могут работать на разных компьютерах. Клиент устанавливается на стороне веб-сайта, а сервер на компьютере с Minecraft-сервером.

Сначала нужно настроить сервер.

#### Сервер

Сервер состоит из следующих файлов:

 * server.php - Этот скрипт занимается извлечением нужной статистики.
 * params.php - Здесь хранятся настройки интересующих нас парметров.

Для того, чтобы серверная часть начала работать достаточно в файле server.php отредактировать один параметр: $statsdir - путь к папке stats на сервере Minecraft.

После этого нужно проверить работу скрипта server.php, введя его адрес в веб-браузере. Скрипт должен отобразить JSON-файл и создать два файла с кешем на веб-сервере.

#### Клиент

Клиент состоит из следующих файлов:
 * index.php - Этот скрипт генерирует HTML-страницы для просмотра.
 * style.css - Здесь хранятся стили для HTML-страниц.
 * avatar.php - Этот скрипт позволяет генерировать аватары из скинов Minecraft.
 * settings.php - Основной файл настроек.
 * lang.php - Настройки надписей для генерации HTML.
 * params.php - Здесь настраивается список учитываемых параметров для статистики.

Для настройки клиента нужно в первую очередь отредактировать файл settings.php. Основные настройки, которые нужно изменить:

 * $server_path - URL к файлу server.php для получения всей статистики.
 * $avatar_path - URL к файлу avatar.php для получения аватарок.
 * $db_name, $db_username, $db_password, $user_list_query - настройки подключения к базе данных для получения списка пользователей.

Затем потребуется отредактировать файл avatar.php. Для его корректной работы достаточно указать путь к папке со скинами на веб-сервере: $skins_path.

Готово. Наберите в адресной строке веб-браузера путь к файлу index.php и проверьте работу скрипта. Прикрепить статистику к своей CMS можно вставив в нужное место этот HTML-код:

```html
<iframe style="border:0;" width="100%" height="1000px" src="/stats/index.php"></iframe>
```
